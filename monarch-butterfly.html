<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monarch Butterfly Migration</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: Arial, sans-serif;
      background: transparent;
      padding: 8px;
    }
    
    .container {
      max-width: 100%;
      margin: 0 auto;
      padding: 12px;
      background: #fff8e1;
      border: 3px solid #ff9800;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .title {
      color: #e65100;
      text-align: center;
      margin-bottom: 8px;
      font-size: 1.1em;
      font-weight: bold;
    }
    
    .subtitle {
      color: #555;
      text-align: center;
      margin-bottom: 12px;
      font-size: 0.85em;
    }
    
    .progress-container {
      width: 100%;
      background: #e0e0e0;
      height: 12px;
      border-radius: 6px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: #ff9800;
      border-radius: 6px;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .map {
      position: relative;
      height: 120px;
      background: #e3f2fd;
      border-radius: 8px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    
    .location-emoji {
      position: absolute;
      top: 10px;
      transform: translateX(-50%);
      font-size: 20px;
      z-index: 5;
    }
    
    .path-line {
      position: absolute;
      height: 3px;
      background: #bdbdbd;
      top: 50%;
      left: 10%;
      right: 10%;
      transform: translateY(-50%);
      z-index: 2;
    }
    
    .path-point {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #757575;
      background: #e0e0e0;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
      transition: all 0.3s;
    }
    
    .path-point.active {
      background: #ff9800;
      border-color: #e65100;
    }
    
    .butterfly {
      position: absolute;
      font-size: 22px;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 4;
      transition: left 0.5s ease;
      animation: float 2s infinite alternate ease-in-out;
    }
    
    @keyframes float {
      from { transform: translate(-50%, -45%); }
      to { transform: translate(-50%, -55%); }
    }
    
    .card {
      background: white;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-bottom: 12px;
    }
    
    .card-title {
      color: #e65100;
      margin-bottom: 8px;
      font-size: 0.95em;
      font-weight: bold;
    }
    
    .fact-container {
      min-height: 50px;
      position: relative;
    }
    
    .fact-text {
      font-size: 0.85em;
      line-height: 1.4;
      transition: opacity 0.5s;
    }
    
    @keyframes fly1 {
      0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
      100% { transform: translate(60px, -60px) rotate(25deg); opacity: 0; }
    }
    
    @keyframes fly2 {
      0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
      100% { transform: translate(-60px, -55px) rotate(-20deg); opacity: 0; }
    }
    
    @keyframes fly3 {
      0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
      100% { transform: translate(70px, -40px) rotate(15deg); opacity: 0; }
    }
    
    @keyframes fly4 {
      0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
      100% { transform: translate(-70px, -35px) rotate(-15deg); opacity: 0; }
    }
    
    .flying-butterfly {
      position: absolute;
      font-size: 14px;
      animation-duration: 1.5s;
      animation-fill-mode: forwards;
    }
    
    .flying-butterfly-1 { animation-name: fly1; }
    .flying-butterfly-2 { animation-name: fly2; }
    .flying-butterfly-3 { animation-name: fly3; }
    .flying-butterfly-4 { animation-name: fly4; }
    
    .controls {
      display: flex;
      gap: 8px;
      justify-content: space-between;
    }
    
    .btn {
      padding: 8px 14px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.85em;
      transition: all 0.2s;
    }
    
    .btn-prev {
      background: #64b5f6;
      color: white;
    }
    
    .btn-prev:hover:not(:disabled) {
      background: #42a5f5;
    }
    
    .btn-prev:disabled {
      background: #e0e0e0;
      color: #9e9e9e;
      cursor: not-allowed;
    }
    
    .btn-next {
      background: #ff9800;
      color: white;
    }
    
    .btn-next:hover {
      background: #f57c00;
    }
    
    .btn-reset {
      background: #4caf50;
      color: white;
    }
    
    .btn-reset:hover {
      background: #43a047;
    }
    
    .completion {
      margin-top: 12px;
      padding: 12px;
      background: #e8f5e9;
      border: 2px solid #4caf50;
      border-radius: 8px;
      text-align: center;
      color: #2e7d32;
      font-size: 0.9em;
      display: none;
    }
    
    @keyframes finale {
      0% { transform: translate(0, 100vh) rotate(0deg); opacity: 0; }
      20% { opacity: 1; }
      80% { opacity: 1; }
      100% { transform: translate(var(--final-x), var(--final-y)) rotate(var(--final-rotate)); opacity: 0; }
    }
    
    .finale-butterfly {
      position: absolute;
      font-size: var(--size, 14px);
      animation: finale 5s forwards;
      z-index: 10;
      pointer-events: none;
    }
    
    .celebration-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9;
      pointer-events: none;
      display: none;
    }
    
    @media (max-width: 480px) {
      .container { padding: 10px; }
      .title { font-size: 1em; }
      .subtitle { font-size: 0.8em; }
      .map { height: 110px; }
      .location-emoji { font-size: 18px; }
      .butterfly { font-size: 20px; }
      .btn { padding: 7px 12px; font-size: 0.8em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="title">ü¶ã Monarch Butterfly Migration</h2>
    <p class="subtitle">Follow the butterfly from Canada to Mexico!</p>
    
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="map">
      <span class="location-emoji" style="left: 10%">üá®üá¶</span>
      <span class="location-emoji" style="left: 30%">üå≤</span>
      <span class="location-emoji" style="left: 50%">üèôÔ∏è</span>
      <span class="location-emoji" style="left: 70%">üåµ</span>
      <span class="location-emoji" style="left: 90%">üá≤üáΩ</span>
      
      <div class="path-line"></div>
      
      <div class="path-point" id="point0" style="left: 10%"></div>
      <div class="path-point" id="point1" style="left: 30%"></div>
      <div class="path-point" id="point2" style="left: 50%"></div>
      <div class="path-point" id="point3" style="left: 70%"></div>
      <div class="path-point" id="point4" style="left: 90%"></div>
      
      <div class="butterfly" id="butterfly">ü¶ã</div>
    </div>
    
    <div class="card">
      <h3 class="card-title" id="locationTitle">Starting Point: Canada</h3>
      <div class="fact-container" id="factContainer">
        <p class="fact-text" id="factText">Monarchs can travel around 2,800 miles during migration!</p>
      </div>
    </div>
    
    <div class="controls">
      <button class="btn btn-prev" id="prevBtn" disabled>‚Üê Previous</button>
      <button class="btn btn-next" id="nextBtn">Next Stop ‚Üí</button>
    </div>
    
    <div id="completion" class="completion">
      <p><strong>üéâ Congratulations! üéâ</strong></p>
      <p>You completed the migration journey!</p>
    </div>
    
    <div id="celebrationOverlay" class="celebration-overlay"></div>
  </div>
  
  <script>
    (function() {
      const path = [
        { location: "Starting Point: Canada", fact: "Monarchs can travel around 2,800 miles during migration!" },
        { location: "United States - Northern States", fact: "They travel in groups of millions of butterflies" },
        { location: "United States - Central States", fact: "They fly south in fall and return north in spring" },
        { location: "United States - Southern States", fact: "Some can live up to 8 months during migration!" },
        { location: "Destination: Mexico", fact: "They return to the same forests in Mexico year after year" }
      ];
      
      let pos = 0;
      let done = false;
      
      const progressBar = document.getElementById('progressBar');
      const butterfly = document.getElementById('butterfly');
      const locationTitle = document.getElementById('locationTitle');
      const factContainer = document.getElementById('factContainer');
      const factText = document.getElementById('factText');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const completion = document.getElementById('completion');
      
      function update(skipAnim = false) {
        progressBar.style.width = `${(pos / (path.length - 1)) * 100}%`;
        butterfly.style.left = `${10 + (pos * 20)}%`;
        locationTitle.textContent = path[pos].location;
        
        for (let i = 0; i < path.length; i++) {
          const point = document.getElementById(`point${i}`);
          point.classList.toggle('active', i <= pos);
        }
        
        if (skipAnim) {
          factText.textContent = path[pos].fact;
          factText.style.opacity = 1;
        } else {
          factText.style.opacity = 0;
        }
        
        prevBtn.disabled = pos === 0;
        
        if (done) {
          nextBtn.textContent = 'Play Again';
          nextBtn.className = 'btn btn-reset';
          completion.style.display = 'block';
        } else {
          nextBtn.textContent = pos === path.length - 1 ? 'Complete!' : 'Next Stop ‚Üí';
          nextBtn.className = 'btn btn-next';
          completion.style.display = 'none';
        }
      }
      
      function animate() {
        const count = 20;
        const existing = document.querySelectorAll('.flying-butterfly');
        existing.forEach(b => b.remove());
        
        for (let i = 0; i < count; i++) {
          const fb = document.createElement('div');
          fb.className = `flying-butterfly flying-butterfly-${(i % 4) + 1}`;
          fb.textContent = 'ü¶ã';
          fb.style.left = `${10 + Math.random() * 80}%`;
          fb.style.top = `${20 + Math.random() * 60}%`;
          fb.style.fontSize = `${14 * (0.8 + Math.random() * 0.8)}px`;
          fb.style.animationDelay = `${Math.random() * 0.5}s`;
          factContainer.appendChild(fb);
        }
        
        setTimeout(() => {
          factText.textContent = path[pos].fact;
          factText.style.transition = 'opacity 0.5s';
          factText.style.opacity = 1;
          setTimeout(() => {
            document.querySelectorAll('.flying-butterfly').forEach(b => b.remove());
          }, 2000);
        }, 1000);
      }
      
      prevBtn.addEventListener('click', () => {
        if (pos > 0) {
          pos--;
          update();
          animate();
        }
      });
      
      nextBtn.addEventListener('click', () => {
        if (done) {
          pos = 0;
          done = false;
          update();
          animate();
        } else if (pos < path.length - 1) {
          pos++;
          update();
          animate();
        } else if (pos === path.length - 1) {
          done = true;
          update(true);
          celebrate();
        }
      });
      
      function celebrate() {
        const overlay = document.getElementById('celebrationOverlay');
        overlay.style.display = 'block';
        overlay.innerHTML = '';
        
        const count = 80;
        for (let i = 0; i < count; i++) {
          const fb = document.createElement('div');
          fb.className = 'finale-butterfly';
          fb.textContent = 'ü¶ã';
          fb.style.left = `${Math.random() * 100}%`;
          fb.style.setProperty('--size', `${14 * (0.5 + Math.random() * 2)}px`);
          fb.style.setProperty('--final-x', `${Math.random() * 200 - 100}px`);
          fb.style.setProperty('--final-y', `${Math.random() * -300 - 50}px`);
          fb.style.setProperty('--final-rotate', `${Math.random() * 360 - 180}deg`);
          fb.style.animationDelay = `${Math.random() * 2}s`;
          overlay.appendChild(fb);
        }
        
        setTimeout(() => {
          overlay.style.display = 'none';
        }, 7000);
      }
      
      update();
      animate();
    })();
  </script>
</body>
</html>
